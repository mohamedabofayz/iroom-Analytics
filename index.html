<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iroom - Revenue Management Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-main: #f4f6f9;
            --bg-card: #ffffff;
            --text-primary: #1e3a5f;
            --text-secondary: #5a6b7d;
            --text-muted: #8a9aad;
            --blue-primary: #2563eb;
            --blue-dark: #1e3a5f;
            --blue-light: #dbeafe;
            --orange-accent: #f97316;
            --orange-light: #fff7ed;
            --green-success: #10b981;
            --green-light: #d1fae5;
            --red-alert: #ef4444;
            --border-color: #e5e9f0;
            --shadow: 0 2px 8px rgba(30, 58, 95, 0.06);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'IBM Plex Sans Arabic', 'Plus Jakarta Sans', sans-serif;
            background: var(--bg-main);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.5;
        }

        .font-display {
            font-family: 'Plus Jakarta Sans', sans-serif;
        }

        .card {
            background: var(--bg-card);
            border-radius: 12px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .card-body {
            padding: 20px;
        }

        .section-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .metric-card {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 10px;
            padding: 16px;
            border: 1px solid var(--border-color);
        }

        .metric-value {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-weight: 800;
            font-size: 32px;
            line-height: 1;
            color: var(--blue-dark);
        }

        .metric-value.orange { color: var(--orange-accent); }
        .metric-value.blue { color: var(--blue-primary); }
        .metric-value.green { color: var(--green-success); }

        .trend-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
        }

        .trend-up {
            background: var(--green-light);
            color: var(--green-success);
        }

        .trend-down {
            background: #fef2f2;
            color: var(--red-alert);
        }

        .action-btn {
            width: 100%;
            padding: 12px 16px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-orange {
            background: var(--orange-accent);
            color: white;
        }

        .btn-orange:hover {
            background: #ea580c;
            transform: translateY(-1px);
        }

        .btn-blue {
            background: var(--blue-primary);
            color: white;
        }

        .btn-blue:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }

        .btn-dark {
            background: var(--blue-dark);
            color: white;
        }

        .btn-dark:hover {
            background: #172554;
            transform: translateY(-1px);
        }

        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 3px;
        }

        .heatmap-cell {
            aspect-ratio: 1;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 600;
            color: white;
            transition: transform 0.2s;
        }

        .heatmap-cell:hover {
            transform: scale(1.1);
            z-index: 1;
        }

        .heatmap-low { background: #93c5fd; color: var(--blue-dark); }
        .heatmap-medium { background: #60a5fa; }
        .heatmap-high { background: #f97316; }
        .heatmap-very-high { background: #dc2626; }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            padding: 10px 12px;
            text-align: right;
            font-size: 11px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            background: #f8fafc;
            border-bottom: 1px solid var(--border-color);
        }

        .data-table td {
            padding: 12px;
            font-size: 13px;
            border-bottom: 1px solid var(--border-color);
        }

        .donut-chart {
            position: relative;
            width: 80px;
            height: 80px;
        }

        .donut-chart svg {
            transform: rotate(-90deg);
        }

        .donut-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .chart-container {
            position: relative;
            height: 140px;
        }

        .map-container {
            position: relative;
            background: var(--blue-light);
            border-radius: 8px;
            overflow: hidden;
        }

        .lang-switch {
            display: flex;
            background: white;
            border-radius: 8px;
            padding: 3px;
            border: 1px solid var(--border-color);
        }

        .lang-btn {
            padding: 6px 14px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .lang-btn.active {
            background: var(--blue-primary);
            color: white;
        }

        .status-badge {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: var(--green-light);
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            color: var(--green-success);
        }

        .pulse-dot {
            width: 8px;
            height: 8px;
            background: var(--green-success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-in {
            animation: fadeInUp 0.5s ease forwards;
        }

        .delay-1 { animation-delay: 0.1s; opacity: 0; }
        .delay-2 { animation-delay: 0.2s; opacity: 0; }
        .delay-3 { animation-delay: 0.3s; opacity: 0; }

        @media (prefers-reduced-motion: reduce) {
            .animate-in { animation: none; opacity: 1; }
            .pulse-dot { animation: none; }
        }

        .icon-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8fafc;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.2s;
        }

        .icon-btn:hover {
            background: var(--blue-light);
            border-color: var(--blue-primary);
        }

        [dir="ltr"] .data-table th,
        [dir="ltr"] .data-table td {
            text-align: left;
        }

        .progress-ring {
            width: 100%;
            height: 6px;
            background: #e5e9f0;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.8s ease;
        }

        .marker-dot {
            width: 10px;
            height: 10px;
            background: var(--orange-accent);
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="bg-white border-b border-[var(--border-color)] sticky top-0 z-50">
        <div class="max-w-[1600px] mx-auto px-6 py-3 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-lg bg-[var(--blue-primary)] flex items-center justify-center">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                        <circle cx="12" cy="10" r="3"/>
                    </svg>
                </div>
                <div>
                    <h1 class="font-display font-bold text-xl text-[var(--blue-dark)]">iroom</h1>
                    <p class="text-xs text-[var(--text-muted)]" data-ar="نظام إدارة الإيرادات الذكي" data-en="Smart Revenue Management">نظام إدارة الإيرادات الذكي</p>
                </div>
            </div>
            
            <div class="flex items-center gap-4">
                <div class="status-badge">
                    <span class="pulse-dot"></span>
                    <span data-ar="مباشر" data-en="Live">مباشر</span>
                </div>
                
                <div class="flex gap-2">
                    <button class="icon-btn" title="Notifications">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--text-secondary)" stroke-width="2">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                    </button>
                    <button class="icon-btn" title="Messages">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--text-secondary)" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                    </button>
                </div>
                
                <div class="lang-switch">
                    <button class="lang-btn active" data-lang="ar">عربي</button>
                    <button class="lang-btn" data-lang="en">EN</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-[1600px] mx-auto p-6">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <!-- Column 1: Market Pulse -->
            <div class="space-y-5 animate-in delay-1">
                <!-- Header Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="w-8 h-8 rounded-lg bg-[var(--blue-light)] flex items-center justify-center">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--blue-primary)" stroke-width="2">
                                <polyline points="22,12 18,12 15,21 9,3 6,12 2,12"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h2 class="font-semibold text-[var(--blue-dark)]" data-ar="نبض السوق" data-en="Market Pulse">نبض السوق</h2>
                        </div>
                        <div class="section-badge bg-[var(--blue-light)] text-[var(--blue-primary)]" data-ar="مباشر" data-en="Live">مباشر</div>
                    </div>
                    <div class="card-body">
                        <div class="grid grid-cols-2 gap-3">
                            <div class="metric-card">
                                <p class="text-xs text-[var(--text-muted)] mb-1" data-ar="إشغال السوق" data-en="Market Occupancy">إشغال السوق</p>
                                <div class="metric-value">72%</div>
                                <div class="trend-badge trend-up mt-2">
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                        <polyline points="18,15 12,9 6,15"/>
                                    </svg>
                                    +4.2%
                                </div>
                            </div>
                            <div class="metric-card">
                                <p class="text-xs text-[var(--text-muted)] mb-1" data-ar="إشغال الفندق" data-en="Hotel Occupancy">إشغال الفندق</p>
                                <div class="metric-value green">78%</div>
                                <div class="trend-badge trend-up mt-2">
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                        <polyline points="18,15 12,9 6,15"/>
                                    </svg>
                                    +6.8%
                                </div>
                            </div>
                        </div>
                        
                        <div class="metric-card mt-3">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="text-xs text-[var(--text-muted)]" data-ar="متوسط سعر السوق" data-en="Market ADR">متوسط سعر السوق</p>
                                    <div class="flex items-baseline gap-1 mt-1">
                                        <span class="metric-value orange">540</span>
                                        <span class="text-sm text-[var(--text-secondary)]">SAR</span>
                                    </div>
                                </div>
                                <div class="text-left">
                                    <p class="text-xs text-[var(--text-muted)]" data-ar="فجوة السعر" data-en="Price Gap">فجوة السعر</p>
                                    <p class="text-lg font-bold text-[var(--green-success)]">+55 SAR</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Trend Chart -->
                <div class="card">
                    <div class="card-body py-4">
                        <div class="flex justify-between items-center mb-3">
                            <p class="text-sm font-semibold text-[var(--blue-dark)]" data-ar="اتجاه الإشغال (آخر 12 شهر)" data-en="Occupancy Trend (Last 12 Months)">اتجاه الإشغال (آخر 12 شهر)</p>
                            <span class="section-badge bg-[var(--green-light)] text-[var(--green-success)]" data-ar="طلب قوي" data-en="Strong Demand">طلب قوي</span>
                        </div>
                        <div class="chart-container">
                            <canvas id="trendChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Monthly Visitors -->
                <div class="card">
                    <div class="card-body">
                        <div class="flex items-start gap-4">
                            <div class="flex-1">
                                <p class="text-xs text-[var(--text-muted)] mb-1" data-ar="زوار الشهر" data-en="Monthly Visitors">زوار الشهر</p>
                                <div class="flex items-baseline gap-2">
                                    <span class="metric-value blue">5.1M</span>
                                    <span class="text-sm text-[var(--text-secondary)]" data-ar="زائر" data-en="Visitors">زائر</span>
                                </div>
                                <div class="flex items-center gap-4 mt-3">
                                    <div>
                                        <p class="text-xs text-[var(--text-muted)]" data-ar="متوسط الإقامة" data-en="Avg. Stay">متوسط الإقامة</p>
                                        <p class="text-lg font-bold text-[var(--blue-dark)]">3.2 <span class="text-xs font-normal text-[var(--text-muted)]" data-ar="ليالي" data-en="Nights">ليالي</span></p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-[var(--text-muted)]" data-ar="متوسط الإنفاق" data-en="Avg. Spend">متوسط الإنفاق</p>
                                        <p class="text-lg font-bold text-[var(--blue-dark)]">900 <span class="text-xs font-normal text-[var(--text-muted)]">SAR</span></p>
                                    </div>
                                </div>
                            </div>
                            <div class="map-container w-28 h-28 flex-shrink-0 flex items-center justify-center relative">
                                <svg viewBox="0 0 100 100" width="90" height="90">
                                    <path d="M50 5 L85 25 L90 65 L75 95 L25 95 L10 65 L15 25 Z" fill="#93c5fd" stroke="var(--blue-primary)" stroke-width="1.5"/>
                                    <circle cx="45" cy="35" r="3" fill="var(--orange-accent)"/>
                                    <circle cx="55" cy="50" r="3" fill="var(--orange-accent)"/>
                                    <circle cx="35" cy="65" r="3" fill="var(--orange-accent)"/>
                                </svg>
                            </div>
                        </div>
                        
                        <div class="border-t border-[var(--border-color)] mt-4 pt-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="donut-chart">
                                        <svg width="80" height="80" viewBox="0 0 80 80">
                                            <circle cx="40" cy="40" r="30" fill="none" stroke="#e5e9f0" stroke-width="8"/>
                                            <circle cx="40" cy="40" r="30" fill="none" stroke="var(--blue-primary)" stroke-width="8" stroke-dasharray="122.5 188.5" stroke-linecap="round"/>
                                            <circle cx="40" cy="40" r="30" fill="none" stroke="var(--orange-accent)" stroke-width="8" stroke-dasharray="65.5 188.5" stroke-dashoffset="-122.5" stroke-linecap="round"/>
                                        </svg>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="flex items-center gap-2">
                                            <span class="w-2 h-2 rounded-full bg-[var(--blue-primary)]"></span>
                                            <span class="text-xs text-[var(--text-secondary)]"><span class="font-semibold">65%</span> <span data-ar="محلي" data-en="Domestic">محلي</span></span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <span class="w-2 h-2 rounded-full bg-[var(--orange-accent)]"></span>
                                            <span class="text-xs text-[var(--text-secondary)]"><span class="font-semibold">35%</span> <span data-ar="دولي" data-en="International">دولي</span></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Column 2: Revenue Intelligence -->
            <div class="space-y-5 animate-in delay-2">
                <!-- Header Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="w-8 h-8 rounded-lg bg-[var(--orange-light)] flex items-center justify-center">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--orange-accent)" stroke-width="2">
                                <line x1="12" y1="1" x2="12" y2="23"/>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h2 class="font-semibold text-[var(--blue-dark)]" data-ar="ذكاء الإيرادات" data-en="Revenue Intelligence">ذكاء الإيرادات</h2>
                        </div>
                        <div class="section-badge bg-[var(--orange-light)] text-[var(--orange-accent)]" data-ar="AI" data-en="AI">AI</div>
                    </div>
                    <div class="card-body">
                        <div class="grid grid-cols-3 gap-3">
                            <div class="text-center">
                                <p class="text-xs text-[var(--text-muted)] mb-1" data-ar="توقع 30 يوم" data-en="30-Day">توقع 30 يوم</p>
                                <div class="metric-value green text-2xl">85%</div>
                            </div>
                            <div class="text-center">
                                <p class="text-xs text-[var(--text-muted)] mb-1" data-ar="توقع 60 يوم" data-en="60-Day">توقع 60 يوم</p>
                                <div class="metric-value blue text-2xl">77%</div>
                            </div>
                            <div class="text-center">
                                <p class="text-xs text-[var(--text-muted)] mb-1">ADR</p>
                                <div class="metric-value orange text-2xl">480</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Heatmap Calendar -->
                <div class="card">
                    <div class="card-body">
                        <div class="flex justify-between items-center mb-3">
                            <p class="text-sm font-semibold text-[var(--blue-dark)]" data-ar="خريطة حرارة الإشغال" data-en="Occupancy Heatmap">خريطة حرارة الإشغال</p>
                            <span class="text-xs text-[var(--text-muted)]" data-ar="يناير - نوفمبر" data-en="Jan - Nov">يناير - نوفمبر</span>
                        </div>
                        
                        <div class="heatmap-grid mb-2">
                            <div class="text-center text-[10px] text-[var(--text-muted)] pb-1" data-ar="إث" data-en="Mon">إث</div>
                            <div class="text-center text-[10px] text-[var(--text-muted)] pb-1" data-ar="ثل" data-en="Tue">ثل</div>
                            <div class="text-center text-[10px] text-[var(--text-muted)] pb-1" data-ar="أرب" data-en="Wed">أرب</div>
                            <div class="text-center text-[10px] text-[var(--text-muted)] pb-1" data-ar="خم" data-en="Thu">خم</div>
                            <div class="text-center text-[10px] text-[var(--text-muted)] pb-1" data-ar="جم" data-en="Fri">جم</div>
                            <div class="text-center text-[10px] text-[var(--text-muted)] pb-1" data-ar="سب" data-en="Sat">سب</div>
                            <div class="text-center text-[10px] text-[var(--text-muted)] pb-1" data-ar="أح" data-en="Sun">أح</div>
                        </div>
                        
                        <div id="heatmapGrid" class="heatmap-grid"></div>
                        
                        <div class="flex justify-between items-center mt-3">
                            <div class="flex items-center gap-1">
                                <span class="w-3 h-3 rounded heatmap-low"></span>
                                <span class="w-3 h-3 rounded heatmap-medium"></span>
                                <span class="w-3 h-3 rounded heatmap-high"></span>
                                <span class="w-3 h-3 rounded heatmap-very-high"></span>
                            </div>
                            <span class="text-[10px] text-[var(--text-muted)]" data-ar="منخفض ← مرتفع" data-en="Low ← High">منخفض ← مرتفع</span>
                        </div>
                    </div>
                </div>

                <!-- Market Gap Summary -->
                <div class="card">
                    <div class="card-body">
                        <p class="text-sm font-semibold text-[var(--blue-dark)] mb-3" data-ar="ملخص فجوة السوق" data-en="Market Gap Summary">ملخص فجوة السوق</p>
                        
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th data-ar="المؤشر" data-en="Metric">المؤشر</th>
                                    <th data-ar="السوق" data-en="Market">السوق</th>
                                    <th data-ar="الفندق" data-en="Hotel">الفندق</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="font-medium" data-ar="نسبة الإشغال" data-en="Occupancy">نسبة الإشغال</td>
                                    <td>72%</td>
                                    <td class="text-[var(--green-success)] font-semibold">78%</td>
                                </tr>
                                <tr>
                                    <td class="font-medium" data-ar="فجوة التسعير" data-en="Pricing Gap">فجوة التسعير</td>
                                    <td>540 SAR</td>
                                    <td class="text-[var(--green-success)] font-semibold">620 SAR</td>
                                </tr>
                                <tr>
                                    <td class="font-medium">ADR</td>
                                    <td>480 SAR</td>
                                    <td class="text-[var(--green-success)] font-semibold">540 SAR</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="card">
                    <div class="card-body">
                        <p class="text-sm font-semibold text-[var(--blue-dark)] mb-3" data-ar="إجراءات سريعة" data-en="Quick Actions">إجراءات سريعة</p>
                        <div class="space-y-2">
                            <button class="action-btn btn-orange" id="increaseRateBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="18,15 12,9 6,15"/>
                                </svg>
                                <span data-ar="زيادة السعر +5%" data-en="Increase Rate +5%">زيادة السعر +5%</span>
                            </button>
                            <button class="action-btn btn-blue" id="openPromoBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                    <line x1="16" y1="2" x2="16" y2="6"/>
                                    <line x1="8" y1="2" x2="8" y2="6"/>
                                </svg>
                                <span data-ar="فتح عرض ترويجي" data-en="Open Promotion">فتح عرض ترويجي</span>
                            </button>
                            <button class="action-btn btn-dark" id="closeChannelsBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                    <line x1="9" y1="9" x2="15" y2="15"/>
                                    <line x1="15" y1="9" x2="9" y2="15"/>
                                </svg>
                                <span data-ar="إغلاق القنوات المنخفضة" data-en="Close Low Channels">إغلاق القنوات المنخفضة</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Column 3: Forecast & Actions -->
            <div class="space-y-5 animate-in delay-3">
                <!-- Header Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="w-8 h-8 rounded-lg bg-[var(--green-light)] flex items-center justify-center">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--green-success)" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12,6 12,12 16,14"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h2 class="font-semibold text-[var(--blue-dark)]" data-ar="التوقعات والإجراءات" data-en="Forecast & Actions">التوقعات والإجراءات</h2>
                        </div>
                        <div class="section-badge bg-[var(--green-light)] text-[var(--green-success)]" data-ar="مؤكد" data-en="Confirmed">مؤكد</div>
                    </div>
                    <div class="card-body">
                        <div class="grid grid-cols-3 gap-3 mb-4">
                            <div class="text-center">
                                <p class="text-xs text-[var(--text-muted)] mb-1" data-ar="توقع الإشغال" data-en="Forecast">توقع الإشغال</p>
                                <div class="metric-value green text-2xl">84%</div>
                            </div>
                            <div class="text-center">
                                <p class="text-xs text-[var(--text-muted)] mb-1" data-ar="30 يوم" data-en="30 Days">30 يوم</p>
                                <div class="metric-value blue text-2xl">77%</div>
                            </div>
                            <div class="text-center">
                                <p class="text-xs text-[var(--text-muted)] mb-1" data-ar="90 يوم" data-en="90 Days">90 يوم</p>
                                <div class="metric-value text-2xl">69%</div>
                            </div>
                        </div>
                        <div class="progress-ring">
                            <div class="progress-fill bg-gradient-to-r from-[var(--green-success)] to-[var(--blue-primary)]" style="width: 84%"></div>
                        </div>
                    </div>
                </div>

                <!-- Pickup Trend -->
                <div class="card">
                    <div class="card-body">
                        <div class="flex justify-between items-center mb-3">
                            <p class="text-sm font-semibold text-[var(--blue-dark)]" data-ar="اتجاه الحجز (Pickup)" data-en="Pickup Trend">اتجاه الحجز (Pickup)</p>
                            <div class="text-left">
                                <span class="text-xs text-[var(--text-muted)]">ADR</span>
                                <span class="text-lg font-bold text-[var(--orange-accent)]">630 SAR</span>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="pickupChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Visitor Growth -->
                <div class="card">
                    <div class="card-body">
                        <p class="text-sm font-semibold text-[var(--blue-dark)] mb-4" data-ar="نمو الزوار" data-en="Visitor Growth">نمو الزوار</p>
                        
                        <div class="flex items-center gap-4 mb-4">
                            <div class="w-14 h-14 rounded-xl bg-[var(--green-light)] flex items-center justify-center">
                                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="var(--green-success)" stroke-width="2.5">
                                    <polyline points="23,6 13.5,15.5 8.5,10.5 1,18"/>
                                    <polyline points="17,6 23,6 23,12"/>
                                </svg>
                            </div>
                            <div>
                                <div class="text-3xl font-bold text-[var(--green-success)]">+18%</div>
                                <p class="text-xs text-[var(--text-muted)]" data-ar="مقارنة بالشهر الماضي" data-en="vs last month">مقارنة بالشهر الماضي</p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-3">
                            <div class="metric-card">
                                <p class="text-xs text-[var(--text-muted)]" data-ar="السوق ساخن" data-en="Market Hot">السوق ساخن</p>
                                <p class="text-lg font-bold text-[var(--orange-accent)]">+111%</p>
                                <p class="text-[10px] text-[var(--text-muted)]" data-ar="نمو الطلب" data-en="Demand Growth">نمو الطلب</p>
                            </div>
                            <div class="metric-card">
                                <p class="text-xs text-[var(--text-muted)]" data-ar="متوسط الإقامة" data-en="Avg. Stay">متوسط الإقامة</p>
                                <p class="text-lg font-bold text-[var(--blue-dark)]">3.4</p>
                                <p class="text-[10px] text-[var(--text-muted)]" data-ar="ليالي" data-en="Nights">ليالي</p>
                            </div>
                        </div>
                        
                        <div class="border-t border-[var(--border-color)] mt-4 pt-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-xs text-[var(--text-muted)]" data-ar="الإجراء المقترح" data-en="Suggested Action">الإجراء المقترح</span>
                                <span class="trend-badge trend-up" data-ar="زيادة السعر 6%" data-en="Increase Rate 6%">زيادة السعر 6%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-xs text-[var(--text-muted)]" data-ar="الثقة" data-en="Confidence">الثقة</span>
                                <span class="text-sm font-semibold text-[var(--green-success)]">82%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-xs text-[var(--text-muted)]" data-ar="متوسط الإنفاق" data-en="Avg. Spend">متوسط الإنفاق</span>
                                <span class="text-sm font-semibold">920 SAR</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- High Season Controls -->
                <div class="card" style="background: linear-gradient(135deg, #fff7ed 0%, #ffffff 100%); border-color: var(--orange-accent);">
                    <div class="card-body">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-10 h-10 rounded-xl bg-[var(--orange-accent)] flex items-center justify-center">
                                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                                    <circle cx="12" cy="12" r="5"/>
                                    <line x1="12" y1="1" x2="12" y2="3"/>
                                    <line x1="12" y1="21" x2="12" y2="23"/>
                                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                                    <line x1="1" y1="12" x2="3" y2="12"/>
                                    <line x1="21" y1="12" x2="23" y2="12"/>
                                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-semibold text-[var(--blue-dark)]" data-ar="موسم الذروة" data-en="High Season">موسم الذروة</h3>
                                <p class="text-xs text-[var(--text-muted)]" data-ar="عناصر تحكم مُحسّنة" data-en="Optimized Controls">عناصر تحكم مُحسّنة</p>
                            </div>
                        </div>
                        
                        <div class="space-y-2">
                            <button class="action-btn btn-orange" id="raiseRatesBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="18,15 12,9 6,15"/>
                                </svg>
                                <span data-ar="رفع الأسعار +5%" data-en="Raise Rates +5%">رفع الأسعار +5%</span>
                            </button>
                            <button class="action-btn btn-blue" id="openPromotionBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                    <line x1="16" y1="2" x2="16" y2="6"/>
                                </svg>
                                <span data-ar="فتح عرض ترويجي" data-en="Open Promotion">فتح عرض ترويجي</span>
                            </button>
                            <button class="action-btn btn-dark" id="closeLowBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                    <line x1="9" y1="9" x2="15" y2="15"/>
                                    <line x1="15" y1="9" x2="9" y2="15"/>
                                </svg>
                                <span data-ar="إغلاق القنوات المنخفضة" data-en="Close Low Channels">إغلاق القنوات المنخفضة</span>
                            </button>
                            <button class="action-btn" style="background: #64748b; color: white;" id="adjustMinStayBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                    <line x1="16" y1="2" x2="16" y2="6"/>
                                    <line x1="8" y1="2" x2="8" y2="6"/>
                                    <line x1="3" y1="10" x2="21" y2="10"/>
                                </svg>
                                <span data-ar="تعديل الحد الأدنى للإقامة" data-en="Adjust Min Stay">تعديل الحد الأدنى للإقامة</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-white rounded-xl shadow-xl border border-[var(--border-color)] transform translate-y-full opacity-0 transition-all duration-300 z-50">
        <div class="p-4 flex items-center gap-3">
            <div class="w-12 h-12 rounded-xl bg-[var(--green-light)] flex items-center justify-center flex-shrink-0">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--green-success)" stroke-width="2">
                    <polyline points="20,6 9,17 4,12"/>
                </svg>
            </div>
            <div>
                <p class="font-semibold text-[var(--blue-dark)]" id="toastTitle"></p>
                <p class="text-sm text-[var(--text-muted)]" id="toastMessage"></p>
            </div>
        </div>
    </div>

    <script>
        // Data
        const heatmapData = [
            12, 8, 15, 22, 35, 28, 18,
            10, 6, 12, 25, 42, 38, 22,
            8, 5, 10, 18, 33, 45, 30,
            15, 12, 20, 28, 38, 52, 35,
            20, 18, 25, 35, 48, 55, 40
        ];

        const trendData = [
            { month: 'Jan', market: 58, hotel: 62 },
            { month: 'Feb', market: 62, hotel: 68 },
            { month: 'Mar', market: 65, hotel: 72 },
            { month: 'Apr', market: 68, hotel: 75 },
            { month: 'May', market: 72, hotel: 78 },
            { month: 'Jun', market: 70, hotel: 76 },
            { month: 'Jul', market: 75, hotel: 80 },
            { month: 'Aug', market: 78, hotel: 82 },
            { month: 'Sep', market: 74, hotel: 79 },
            { month: 'Oct', market: 72, hotel: 78 },
            { month: 'Nov', market: 76, hotel: 82 }
        ];

        const pickupData = [45, 52, 58, 65, 72, 78, 85, 88, 92, 95, 98, 102];

        let currentLang = 'ar';

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initHeatmap();
            initTrendChart();
            initPickupChart();
            initLanguageSwitch();
            initActions();
        });

        // Heatmap
        function initHeatmap() {
            const container = document.getElementById('heatmapGrid');
            if (!container) return;

            heatmapData.forEach(value => {
                const cell = document.createElement('div');
                cell.className = 'heatmap-cell';
                
                let cls;
                if (value < 15) cls = 'heatmap-low';
                else if (value < 25) cls = 'heatmap-medium';
                else if (value < 40) cls = 'heatmap-high';
                else cls = 'heatmap-very-high';
                
                cell.classList.add(cls);
                cell.textContent = value;
                cell.title = `${value}%`;
                container.appendChild(cell);
            });
        }

        // Trend Chart
        function initTrendChart() {
            const canvas = document.getElementById('trendChart');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            const rect = canvas.parentElement.getBoundingClientRect();
            const dpr = window.devicePixelRatio || 1;

            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            canvas.style.width = rect.width + 'px';
            canvas.style.height = rect.height + 'px';
            ctx.scale(dpr, dpr);

            const width = rect.width;
            const height = rect.height;
            const padding = { top: 20, right: 20, bottom: 30, left: 40 };

            const chartWidth = width - padding.left - padding.right;
            const chartHeight = height - padding.top - padding.bottom;

            const maxVal = 100;
            const stepX = chartWidth / (trendData.length - 1);

            // Grid lines
            ctx.strokeStyle = '#e5e9f0';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 4; i++) {
                const y = padding.top + (chartHeight / 4) * i;
                ctx.beginPath();
                ctx.moveTo(padding.left, y);
                ctx.lineTo(width - padding.right, y);
                ctx.stroke();
            }

            // Market line (blue)
            ctx.beginPath();
            trendData.forEach((d, i) => {
                const x = padding.left + i * stepX;
                const y = padding.top + chartHeight - (d.market / maxVal) * chartHeight;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.strokeStyle = '#2563eb';
            ctx.lineWidth = 2.5;
            ctx.stroke();

            // Hotel line (green)
            ctx.beginPath();
            trendData.forEach((d, i) => {
                const x = padding.left + i * stepX;
                const y = padding.top + chartHeight - (d.hotel / maxVal) * chartHeight;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.strokeStyle = '#10b981';
            ctx.lineWidth = 2.5;
            ctx.stroke();

            // Points
            trendData.forEach((d, i) => {
                const x = padding.left + i * stepX;
                
                // Market point
                const yMarket = padding.top + chartHeight - (d.market / maxVal) * chartHeight;
                ctx.beginPath();
                ctx.arc(x, yMarket, 4, 0, Math.PI * 2);
                ctx.fillStyle = '#2563eb';
                ctx.fill();

                // Hotel point
                const yHotel = padding.top + chartHeight - (d.hotel / maxVal) * chartHeight;
                ctx.beginPath();
                ctx.arc(x, yHotel, 4, 0, Math.PI * 2);
                ctx.fillStyle = '#10b981';
                ctx.fill();
            });

            // Labels
            ctx.fillStyle = '#8a9aad';
            ctx.font = '10px Plus Jakarta Sans';
            ctx.textAlign = 'center';
            trendData.forEach((d, i) => {
                if (i % 2 === 0) {
                    const x = padding.left + i * stepX;
                    ctx.fillText(d.month, x, height - 8);
                }
            });
        }

        // Pickup Chart
        function initPickupChart() {
            const canvas = document.getElementById('pickupChart');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            const rect = canvas.parentElement.getBoundingClientRect();
            const dpr = window.devicePixelRatio || 1;

            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            canvas.style.width = rect.width + 'px';
            canvas.style.height = rect.height + 'px';
            ctx.scale(dpr, dpr);

            const width = rect.width;
            const height = rect.height;
            const padding = 20;

            const maxVal = Math.max(...pickupData);
            const minVal = Math.min(...pickupData);
            const range = Math.max(maxVal - minVal, 1);
            const stepX = (width - padding * 2) / (pickupData.length - 1);

            // Gradient fill
            ctx.beginPath();
            ctx.moveTo(padding, height - padding);
            pickupData.forEach((val, i) => {
                const x = padding + i * stepX;
                const y = height - padding - ((val - minVal) / range) * (height - padding * 2);
                ctx.lineTo(x, y);
            });
            ctx.lineTo(width - padding, height - padding);
            ctx.closePath();

            const gradient = ctx.createLinearGradient(0, 0, 0, height);
            gradient.addColorStop(0, 'rgba(16, 185, 129, 0.3)');
            gradient.addColorStop(1, 'rgba(16, 185, 129, 0.02)');
            ctx.fillStyle = gradient;
            ctx.fill();

            // Line
            ctx.beginPath();
            pickupData.forEach((val, i) => {
                const x = padding + i * stepX;
                const y = height - padding - ((val - minVal) / range) * (height - padding * 2);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.strokeStyle = '#10b981';
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.stroke();

            // End point
            const lastX = width - padding;
            const lastY = height - padding - ((pickupData[pickupData.length - 1] - minVal) / range) * (height - padding * 2);
            ctx.beginPath();
            ctx.arc(lastX, lastY, 6, 0, Math.PI * 2);
            ctx.fillStyle = '#10b981';
            ctx.fill();
            ctx.beginPath();
            ctx.arc(lastX, lastY, 3, 0, Math.PI * 2);
            ctx.fillStyle = 'white';
            ctx.fill();
        }

        // Language Switch
        function initLanguageSwitch() {
            const btns = document.querySelectorAll('.lang-btn');

            btns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const lang = btn.dataset.lang;
                    if (lang === currentLang) return;

                    currentLang = lang;

                    btns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
                    document.documentElement.lang = lang;

                    document.querySelectorAll('[data-ar][data-en]').forEach(el => {
                        el.textContent = el.dataset[lang];
                    });
                });
            });
        }

        // Actions
        function initActions() {
            const toast = document.getElementById('toast');
            const toastTitle = document.getElementById('toastTitle');
            const toastMessage = document.getElementById('toastMessage');

            const showToast = (title, message) => {
                toastTitle.textContent = title;
                toastMessage.textContent = message;
                toast.style.transform = 'translateY(0)';
                toast.style.opacity = '1';

                setTimeout(() => {
                    toast.style.transform = 'translateY(100%)';
                    toast.style.opacity = '0';
                }, 3000);
            };

            const actionButtons = [
                { id: 'increaseRateBtn', titleAr: 'تم زيادة السعر', titleEn: 'Rate Increased', msgAr: 'تم تطبيق زيادة 5% بنجاح', msgEn: '5% increase applied successfully' },
                { id: 'openPromoBtn', titleAr: 'تم فتح العرض', titleEn: 'Promotion Opened', msgAr: 'العرض الترويجي فعال الآن', msgEn: 'Promotion is now active' },
                { id: 'closeChannelsBtn', titleAr: 'تم إغلاق القنوات', titleEn: 'Channels Closed', msgAr: 'تم إغلاق القنوات منخفضة الأداء', msgEn: 'Low-performing channels closed' },
                { id: 'raiseRatesBtn', titleAr: 'تم رفع الأسعار', titleEn: 'Rates Raised', msgAr: 'زيادة 5% مطبقة للموسم', msgEn: '5% seasonal increase applied' },
                { id: 'openPromotionBtn', titleAr: 'تم فتح العرض', titleEn: 'Promotion Opened', msgAr: 'عرض الموسم فعال', msgEn: 'Seasonal promotion active' },
                { id: 'closeLowBtn', titleAr: 'تم الإغلاق', titleEn: 'Closed', msgAr: 'القنوات المنخفضة مغلقة', msgEn: 'Low channels closed' },
                { id: 'adjustMinStayBtn', titleAr: 'تم التعديل', titleEn: 'Adjusted', msgAr: 'تم تحديث الحد الأدنى للإقامة', msgEn: 'Minimum stay updated' }
            ];

            actionButtons.forEach(btn => {
                const el = document.getElementById(btn.id);
                if (el) {
                    el.addEventListener('click', () => {
                        showToast(
                            currentLang === 'ar' ? btn.titleAr : btn.titleEn,
                            currentLang === 'ar' ? btn.msgAr : btn.msgEn
                        );
                    });
                }
            });
        }

        // Resize
        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                initTrendChart();
                initPickupChart();
            }, 200);
        });
    </script>
</body>
</html>
